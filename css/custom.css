/* ============================================
   BRICKSTONE REALTY GROUP — Custom Styles
   Mobile-first. Production-optimised.
   80% mobile users.
   ============================================ */

/* ----------------------------------------
   BASE
   ---------------------------------------- */
*, *::before, *::after { box-sizing: border-box; }

::selection { background-color: #C9A84C; color: #0B1C2D; }

body {
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Safe area for notched phones (iPhone X+, Android cutouts) */
.safe-bottom {
  padding-bottom: max(12px, env(safe-area-inset-bottom));
}


/* ----------------------------------------
   NAVIGATION
   ---------------------------------------- */
#navbar {
  background: transparent;
  will-change: transform;     /* GPU layer — only on transform, not color */
  contain: layout style;      /* Prevent reflows leaking out of navbar */
}

#navbar.scrolled {
  background: rgba(11, 28, 45, 0.97);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 1px 24px rgba(0,0,0,.18);
}

.nav-link {
  color: rgba(255,255,255,.8);
  transition: color .25s ease;
}
.nav-link:hover { color: #C9A84C; }

.nav-link::after {
  content: '';
  position: absolute;
  bottom: -3px; left: 0;
  width: 0; height: 1px;
  background: #C9A84C;
  transition: width .3s ease;
}
.nav-link:hover::after { width: 100%; }


/* ----------------------------------------
   HAMBURGER
   Each line: 24px wide (w-6), 2px tall, gap-[5px]
   Center-to-center = 5px gap + 2px height = 7px
   Line 1 → line 3 distance = 14px
   Each moves ±7px to meet at center for X
   ---------------------------------------- */
.hamburger-line {
  background-color: rgba(255,255,255,.95);
  display: block;
  transform-origin: center center;
  will-change: transform, opacity;
  transition: transform .32s cubic-bezier(.4,0,.2,1),
              opacity   .22s ease,
              background-color .3s ease;
}

/* X animation — lines 1 & 3 meet at line 2 position */
#menu-toggle.active .hamburger-line:nth-child(1) {
  transform: translateY(7px) rotate(45deg);
}
#menu-toggle.active .hamburger-line:nth-child(2) {
  opacity: 0;
  transform: scaleX(0);
}
#menu-toggle.active .hamburger-line:nth-child(3) {
  transform: translateY(-7px) rotate(-45deg);
}

/* Gold tint when open */
#menu-toggle.active .hamburger-line {
  background-color: #C9A84C;
}


/* ----------------------------------------
   MOBILE MENU
   Slides DOWN below the navbar — logo & button
   are NEVER covered.
   ---------------------------------------- */
.mobile-menu-panel {
  position: absolute;       /* relative to #navbar */
  top: 100%;                /* starts at bottom of nav bar */
  left: 0; right: 0;
  background: rgba(11, 28, 45, 0.98);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-top: 1px solid rgba(201,168,76,.25);
  box-shadow: 0 12px 40px rgba(0,0,0,.45);

  /* Closed state */
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  transition: max-height .4s cubic-bezier(.4,0,.2,1), opacity .3s ease;
}

.mobile-menu-panel.open {
  max-height: 90svh;   /* viewport-relative so it never overflows on short screens */
  max-height: 90vh;    /* fallback for browsers without svh */
  overflow-y: auto;    /* scroll if content taller than viewport (e.g. iPhone SE) */
  opacity: 1;
  pointer-events: auto;
}

/* Nav link slide-in stagger */
.mobile-nav-link {
  display: block;
  opacity: 0;
  transform: translateX(-14px);
  transition: opacity .35s ease, transform .35s ease, color .2s ease;
}
.mobile-menu-panel.open .mobile-nav-link            { opacity: 1; transform: translateX(0); }
.mobile-menu-panel.open .mobile-nav-link:nth-child(1) { transition-delay: .06s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(2) { transition-delay: .11s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(3) { transition-delay: .16s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(4) { transition-delay: .21s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(5) { transition-delay: .26s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(6) { transition-delay: .31s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(7) { transition-delay: .36s; }
.mobile-menu-panel.open .mobile-nav-link:nth-child(8) { transition-delay: .41s; }
.mobile-nav-link:hover { color: #C9A84C; }


/* ----------------------------------------
   HERO ANIMATIONS
   ---------------------------------------- */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(28px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes bounceSlow {
  0%, 100% { transform: translateY(0); }
  50%       { transform: translateY(-8px); }
}

.animate-fade-in {
  animation: fadeInUp .9s ease-out .25s both;
}

.animate-bounce-slow {
  animation: bounceSlow 2.4s ease-in-out infinite;
}


/* ----------------------------------------
   SCROLL REVEAL
   ---------------------------------------- */
.reveal-element {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity .65s ease, transform .65s ease;
  will-change: opacity, transform;
}
.reveal-element.revealed {
  opacity: 1;
  transform: translateY(0);
  will-change: auto;   /* release after animation completes */
}

/* Gentle stagger for sibling cards */
.reveal-element:nth-child(2) { transition-delay: .07s; }
.reveal-element:nth-child(3) { transition-delay: .14s; }
.reveal-element:nth-child(4) { transition-delay: .21s; }
.reveal-element:nth-child(5) { transition-delay: .11s; }
.reveal-element:nth-child(6) { transition-delay: .18s; }


/* ----------------------------------------
   FILTER BUTTONS
   ---------------------------------------- */
.filter-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .45rem 1rem;
  font-size: .65rem;
  font-weight: 700;
  letter-spacing: .15em;
  text-transform: uppercase;
  border: 1px solid #d1d5db;
  color: #6B7280;
  background: transparent;
  cursor: pointer;
  transition: border-color .2s ease, background .2s ease, color .2s ease;
  min-height: 40px;   /* tap target */
}
.filter-btn:hover,
.filter-btn.active {
  border-color: #C9A84C;
  background: #C9A84C;
  color: #0B1C2D;
}

/* ----------------------------------------
   RENT CALCULATOR TABS
   ---------------------------------------- */
.calc-tab {
  background: transparent;
  border: none;
  color: #6B7280;
  cursor: pointer;
}
.calc-tab.active {
  color: #0B1C2D;
  border-bottom: 2px solid #C9A84C;
  font-weight: 700;
}
.calc-tab:not(.active):hover {
  color: #0B1C2D;
}


/* ----------------------------------------
   PROPERTY CARD — base + filter animation
   ---------------------------------------- */
.property-card {
  overflow: hidden;
  contain: layout;                            /* prevent card layout bleeding */
  transition: opacity .35s ease, transform .35s ease;
}

/* display:none when filter hides card */
.property-card.hidden-card { display: none; }

/* Fade out → display:none (applied by JS) */
.property-card.card-hiding {
  opacity: 0;
  transform: scale(0.96);
  pointer-events: none;
}

/* Fade in from hidden (applied by JS) */
.property-card.card-showing {
  opacity: 0;
  transform: scale(0.96);
}
.property-card.card-showing.card-visible {
  opacity: 1;
  transform: scale(1);
}

/* ----------------------------------------
   CALCULATOR RESULT PANELS
   Fade in instead of abrupt show/hide
   ---------------------------------------- */
@keyframes calcReveal {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
#result-rent:not(.hidden),
#result-income:not(.hidden) {
  animation: calcReveal .35s ease-out both;
}

/* ----------------------------------------
   CARD IMAGE SHIMMER (placeholder state)
   Subtle pulse while no real image is loaded
   ---------------------------------------- */
@keyframes shimmer {
  0%   { background-position: -400px 0; }
  100% { background-position: 400px 0; }
}
.card-img-placeholder {
  background: linear-gradient(90deg, #e8edf2 25%, #f0f4f8 50%, #e8edf2 75%);
  background-size: 800px 100%;
  animation: shimmer 1.6s ease-in-out infinite;
}

/* ----------------------------------------
   SUBMIT BUTTON SPINNER
   SVG spinner shown while form is in-flight
   ---------------------------------------- */
@keyframes spin {
  to { transform: rotate(360deg); }
}
.btn-spinner {
  display: inline-block;
  width: 14px;
  height: 14px;
  border: 2px solid rgba(11,28,45,.3);
  border-top-color: #0B1C2D;
  border-radius: 50%;
  animation: spin .65s linear infinite;
  vertical-align: middle;
  margin-right: 6px;
  flex-shrink: 0;
}
/* Button loading state */
button.btn-loading {
  opacity: .85;
  cursor: not-allowed;
}


/* ----------------------------------------
   FAQ ACCORDION
   ---------------------------------------- */
.faq-icon { transition: transform .3s ease; }
.faq-icon.rotated { transform: rotate(180deg); }


/* ----------------------------------------
   FORMS
   ---------------------------------------- */
.form-group input.error,
.form-group textarea.error {
  border-color: #f87171 !important;
}

/* Error messages fade in */
.error-message {
  transition: opacity .2s ease;
}
.error-message.visible {
  display: block;
  opacity: 1;
}
.error-message.hidden {
  opacity: 0;
}

#form-success.show {
  display: block;
  animation: fadeInUp .45s ease-out;
}


/* ----------------------------------------
   FLOATING MOBILE CTA
   ---------------------------------------- */
.mobile-cta-bar {
  transform: translateY(100%);
  transition: transform .4s cubic-bezier(.4,0,.2,1);
  will-change: transform;
}
.mobile-cta-bar.visible {
  transform: translateY(0);
}


/* ----------------------------------------
   SCROLLBAR (webkit)
   ---------------------------------------- */
::-webkit-scrollbar       { width: 6px; }
::-webkit-scrollbar-track { background: #F8F7F4; }
::-webkit-scrollbar-thumb { background: #C9A84C; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #D4B96A; }


/* ----------------------------------------
   FOCUS / ACCESSIBILITY
   ---------------------------------------- */
:focus-visible { outline: 2px solid #C9A84C; outline-offset: 3px; }
:focus:not(:focus-visible) { outline: none; }


/* ----------------------------------------
   MOBILE TAP TARGETS
   Min 44×44px per Apple/Google guidelines
   ---------------------------------------- */
@media (max-width: 768px) {
  a, button {
    min-height: 44px;
    min-width: 44px;
  }
  /* Override for purely inline text links */
  p a, li a, .text-xs a, footer a {
    min-height: unset;
    min-width: unset;
  }
}


/* ----------------------------------------
   AMENITY TAGS — property card chips
   ---------------------------------------- */
.amenity-tag {
  display: inline-flex;
  align-items: center;
  gap: 0.2em;
  padding: 0.2rem 0.55rem;
  font-size: 0.65rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  color: #1a2e4a;
  background-color: #f0f4f8;
  border: 1px solid #d1dce8;
  border-radius: 999px;
  white-space: nowrap;
  line-height: 1.4;
}

/* ----------------------------------------
   MOBILE-SPECIFIC OVERRIDES
   Applies to 767px and below
   ---------------------------------------- */
@media (max-width: 767px) {
  /* Remove stagger delays on mobile — elements already in viewport
     when the page scrolls, delays cause them to appear too late     */
  .reveal-element:nth-child(2),
  .reveal-element:nth-child(3),
  .reveal-element:nth-child(4),
  .reveal-element:nth-child(5),
  .reveal-element:nth-child(6) {
    transition-delay: 0s;
  }

  /* Reduce hero section min-height so search bar is reachable
     without scrolling on short phones (iPhone SE = 568px viewport) */
  #hero {
    min-height: 100svh;
    min-height: 100vh;
  }

  /* Card padding tighter on mobile */
  .property-card .p-6 {
    padding: 1rem;
  }

  /* Filter btn min tap target */
  .filter-btn {
    min-height: 40px;
    min-width: 44px;
  }

  /* FAQ tap targets always comfortable */
  .faq-btn {
    min-height: 52px;
  }

  /* Amenity tag row tighter gap on mobile */
  .amenity-tag {
    font-size: 0.6rem;
    padding: 0.15rem 0.45rem;
  }

  /* Calc result boxes: smaller padding on mobile */
  #result-rent .bg-cream,
  #result-income .bg-cream {
    padding: 0.75rem;
  }

  /* Hero content: less padding so CTA is reachable */
  #hero .relative.z-10 {
    padding-top: 2rem;
    padding-bottom: 5rem;
  }
}

/* ----------------------------------------
   TABLET OPTIMISATIONS  (768px – 1023px)
   iPad mini (768px) · iPad Air (820px)
   iPad Pro 11" (834px) · ZenBook Fold (853px)
   Hamburger menu stays visible — desktop nav
   only appears at lg: (1024px+)
   ---------------------------------------- */
@media (min-width: 768px) {

  /* Filter buttons — larger text + tap target on iPad */
  .filter-btn {
    font-size: 0.8rem;
    padding: 0.5rem 1.5rem;
    min-height: 44px;
  }

  /* Amenity tags — readable on tablet */
  .amenity-tag {
    font-size: 0.72rem;
    padding: 0.22rem 0.6rem;
  }

  /* Calculator tabs — larger label text */
  .calc-tab {
    font-size: 0.8rem;
    padding: 0.75rem 1.25rem;
  }

  /* Market rent reference table */
  table {
    font-size: 0.9rem;
  }
  table th,
  table td {
    padding: 0.8rem 1rem;
  }

  /* iOS/iPadOS auto-zoom prevention: keep inputs ≥16px on tablets */
  input, textarea, select {
    font-size: 16px !important;
  }

  /* Hamburger tap target — slightly larger on tablet */
  #menu-toggle {
    width: 48px;
    height: 48px;
  }
}

/* ----------------------------------------
   DESKTOP  (1024px+)
   Hamburger + mobile panel never shown here
   ---------------------------------------- */
@media (min-width: 1024px) {

  /* Hard-hide hamburger and mobile panel at desktop widths */
  #menu-toggle        { display: none !important; }
  .mobile-menu-panel  { display: none !important; }

  /* Release the forced 16px on desktop — let Tailwind classes control it */
  input, textarea, select {
    font-size: unset !important;
  }

  /* Amenity tags — slightly larger on desktop */
  .amenity-tag {
    font-size: 0.75rem;
    padding: 0.25rem 0.65rem;
  }

  /* Calculator tabs — desktop scale */
  .calc-tab {
    font-size: 0.875rem;
    padding: 1rem 1.5rem;
  }

  /* Filter buttons — desktop scale */
  .filter-btn {
    font-size: 0.8rem;
    padding: 0.55rem 1.75rem;
    min-height: 44px;
  }

  /* Market rent table — readable on large screens */
  table {
    font-size: 0.9375rem;
  }
  table th,
  table td {
    padding: 0.9rem 1.25rem;
  }
}

/* ----------------------------------------
   REDUCED MOTION
   Respects user OS preference
   ---------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: .01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .01ms !important;
    scroll-behavior: auto !important;
  }
  .reveal-element      { opacity: 1; transform: none; }
  .animate-fade-in     { animation: none; opacity: 1; }
  .animate-bounce-slow { animation: none; }
  .mobile-nav-link     { opacity: 1; transform: none; }
  .mobile-cta-bar      { transform: none; }
  .hamburger-line      { transition: none; }
  .card-img-placeholder { animation: none; }
  .btn-spinner         { animation: none; }
  #result-rent:not(.hidden),
  #result-income:not(.hidden) { animation: none; }
}
